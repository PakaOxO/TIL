&nbsp;&nbsp;하나의 프로세스는 여러 실행 흐름을 가질 수 있습니다. 이 실행 흐름을 `스레드(thread)`라고 부르는데, 스레드를 이용하면 하나의 프로세스에서 여러 부분을 동시에 실행할 수 있습니다.

<br>

### 프로세스와 스레드

&nbsp;&nbsp;앞 절에서 다룬 프로세스는 하나의 스레드만 지원하는 것을 가정하고 프로세스를 설명했습니다. 이와 같이 실행 흐름의 단위가 하나인 프로세스를 `단일 스레드 프로세스`라고 부릅니다. <mark>스레드는 프로세스를 구성하는 실행단위</mark>로 만약 하나의 프로세스가 한 번에 여러 스레드를 가질 수 있다면 프로세스를 구성하는 여러 명령어를 동시에 실행할 수 있습니다.

&nbsp;&nbsp;프로세스의 스레드들은 각자 스레드 ID, 프로그램 카운터를 포함한 레지스터, 스택 등 실행에 필요한 최소한의 정보을 가진채 <mark>프로세스의 자원을 공유하며 실행</mark>됩니다.

<br>

> 💡 리눅스는 프로세스와 스레드 간에 명확한 구분을 짓지 않는 운영체제입니다. 리눅스는 프로세스와 스레드 모두 실행의 문맥(context fo execution)이라는 점에서 동등하다고 간주하고 둘을 크게 구분하지 않고 `태스크(task)`라는 이름으로 부릅니다.

<br>

### 멀티프로세스와 멀티스레드

&nbsp;&nbsp;여러 프로세스를 동시에 실행하는 것을 `멀티프로세스(multiprocess)`, 여러 스레드로 프로세스를 동시에 실행하는 것을 `멀티스레드(multithread)`라고 합니다.

<br>

**멀티프로세스**

<figure align="center">
  <img src="../images/%EB%A9%80%ED%8B%B0%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4.jpeg" style="width: 400px" />
</figure>

<br>

&nbsp;&nbsp;멀티프로세스에서 동일한 작업을 프로세스로 수행한다면 프로세스를 fork하여 각각 코드 영역, 데이터 영역, 힙 영역 등 모든 자원이 복제되어 메모리에 적재됩니다. 같은 프로그램을 실행하기 위해 메모리에 동일한 내용이 중복해서 존재하게 되는 만큼 메모리의 효율성 측면에서 떨어집니다.

<br>

> ❗️ 메모리를 중복 사용하는 것을 방지하기 위해 fork한 직후 같은 프로세스를 통째로 메모리에 중복 저장하지 않으면서 동시에 프로세스끼리 자원을 공유하지 않는 `쓰기 시 복사(copy on write)`기법이 있습니다. 이에 대한 내용은 이후 14장에서 다룹니다.

<br>

> 💡 **프로세스 간 통신**
>
> &nbsp;&nbsp;대부분의 자원을 처음부터 공유하고 있는 스레드에 비해 까다롭지만 프로세스간 통신이 불가능 하지는 않습니다. 프로세스끼리는 기본적으로 자원을 공유하지 않지만 프로세스끼리 자원을 공유하고 데이터를 주고 받는 `프로세스 간 통신(Inter-Process Communication, IPC)`이라는 것도 있습니다.
>
> &nbsp;&nbsp;프로세스 간 통신에는 파일에 저장된 데이터를 공유하는 파일을 통한 프로세스 간 통신, 여러 프로세스가 서로 공유하는 메모리 영역인 `공유 메모리(shared memory)`를 두고 데이터를 주고 받는 통신, 이외에도 소켓, 파이프 등을 통해 데이터를 주고 받는 통신 등이 있습니다.

<br>

**멀티스레드**

<figure align="center">
  <img src="../images/%EB%A9%80%ED%8B%B0%EC%8A%A4%EB%A0%88%EB%93%9C2.jpeg" style="width: 400px" />
</figure>

<br>

&nbsp;&nbsp;반면 스레드들은 각자 다른 스레드 ID, 프로그램 카운터 값을 포함한 레지스터 값, 스택을 가지고 프로세스가 가지고 있는 자원은 공유하기 때문에 여러 프로세스를 병행 실행하는 것보다 메모리를 효율적으로 사용할 수 있습니다.

<br>

**멀티스레드의 단점**

&nbsp;&nbsp;멀티스레드에서 모든 스레드가 프로세스의 자원을 공유하기 때문에 하나의 스레드에 문제가 생기면 다른 스레드도 영향을 받아 프로세스 전체에 문제가 발생할 수 있습니다.

<br>

> ❗️ **면접 키워드 1 : 프로세스와 스레드의 차이**
>
> &nbsp;&nbsp;`프로세스`는 하나의 프로그램이 실행되어 메모리에 적재되어 있는 것을 의미합니다. 각각의 프로세스는 서로 독립적으로 실행되어 분리된 code, data, heap, stack 영역을 가집니다.
>
> &nbsp;&nbsp;`스레드`는 이러한 프로세스의 실행 흐름의 단위로 하나의 프로세스는 여러 스레드를 가질 수 있으며 이것을 멀티스레드라고 부릅니다. 각 스레드는 프로세스의 자원을 사용하며 code, data, heap 영역을 공유하고 stack 영역만 별도로 할당받게 됩니다.

<br>

> ❗ **면접 키워드 2 : 멀티프로세스와 멀티스레드 차이**
>
> &nbsp;&nbsp;`멀티프로세스`에서 각각의 프로세스는 서로 독립적인 메모리 영역을 사용하기 때문에 많은 메모리를 사용하고, CPU 사용시간이 늘어난다는 단점이 있지만 하나의 프로세스가 예기치 못한 오류로 종료되어도 다른 프로세스는 영향을 받지 않습니다.
>
> &nbsp;&nbsp;반대로 `멀티스레드`는 프로세스의 자원을 공유하기 때문에 메모리를 공유하기 만큼 멀티프로세스에 비해 메모리를 효율적으로 사용할 수 있으나, 하나의 스레드에 문제가 생기면 같은 자원을 공유하는 다른 스레드에 영향을 줄 수 있습니다.

<br>

> ❗ **면접 키워드 3 : 멀티스레드의 동시성과 병렬성**
>
> &nbsp;&nbsp;`동시성`은 멀티작업을 위해 하나의 코어에서 여러 스레드가 번갈아가며 실행되는 것이며(겉으로 보기엔 동시에 실행되는 것처럼 보입니다), `병렬성`은 멀티작업을 위해 멀티코어에서 하나 이상의 스레드를 병렬적으로 실행하는 것입니다.

<br>
